<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <title>Blacklist/Whitelist Module &#8211; ExpressionEngine Documentation</title>

  <meta name="MSSmartTagsPreventParsing" content="TRUE" />
  <link rel="contents" href="../../index.html" />
  <style type="text/css" media="screen,print">@import url(../../docs.css);</style>
</head>

<body>
<div><a name="top"></a></div>

<div id="header">
<table cellpadding="0" cellspacing="0" border="0" style="width:100%;"><tr>
<td class="docheading" style="width:300px;"><a href="../../index.html"><img src="../../images/user_guide.gif" width="231" height="24" alt="ExpressionEngine User Guide" /></a></td>
<td class="searchbox"><form method="get" action="http://www.google.com/search" class="searchbox"><div>Search&nbsp;&nbsp;<input type="text" class="input" name="q" id="q" size="31" maxlength="255" value="" /><input type="hidden" name="as_sitesearch" id="as_sitesearch" value="ee1docs.com" />&nbsp;<input type="submit" class="submit" name="sa" value="Search" /></div></form></td>
</tr>
</table>
</div>


<div id="navlinks">
<a href="../../index.html">Table of Contents</a> &gt;
<a href="../../index.html#modules_docs">Modules and Tags</a> &gt;
<strong>Blacklist/Whitelist Module</strong>
</div>


<div id="content">

	<h1>Blacklist/Whitelist Module</h1>

	<p>The Blacklist/Whitelist Module is one of ExpressionEngine's native spam prevention systems.  It helps prevent spam from occuring in comments, trackbacks, referrers, and other posted information.    Used in combination with other <a href="../../general/spam_protection.html">Spam Prevention Features</a>, the occurrence of spam on your site should be rare.</p>

	<p>This Module is accessed via <dfn>Modules &gt; Blacklist/Whitelist</dfn> in your Control Panel.  This will bring up a screen where you can access either the Blacklist or the Whitelist, which are explained below.</p>

	<ul>
		<li><a href="#blacklist">Blacklist</a></li>
		<li><a href="#whitelist">Whitelist</a></li>
		<li><a href="#updating_blacklist">Updating your Blacklist</a></li>
		<li><a href="#downloading_lists">Downloading ExpressionEngine.com Lists</a></li>
		<li><a href="#writing_htaccess">Writing Blacklist to .htaccess File</a></li>
	</ul>



	<h2><a name="blacklist">Blacklist</a></h2>

	<p>The Blacklist lets you specify content that will trigger ExpressionEngine to deny or delete a comment, trackback, referrer, or other posted information.  For instance, if you are receiving spam from a particular IP address, then you can place that address into the Blacklist and EE will no longer accept data originating from that IP address.</p>


	<h3>Specifying Blacklisted Content</h3>

		<p>There are three types of content that you can add to the Blacklist:</p>

		<ol>
			<li><b>IP Address:</b> You may place IP addresses on separate lines.  For example, you could place <samp>127.255.0.123</samp> in the list.  You may also place partial IP addresses, which means that ExpressionEngine will match all of the addresses contained within that submask.  For instance, if you specify <samp>127.255.0</samp> then EE will match "127.255.0.0" through "127.255.0.255".</li>

			<li><b>URL:</b> URLs or URL fragments can be placed here, with each entry on a separate line.  For instance, you could specify <samp>www.spam-king.com</samp> and EE would match any incoming URLs from that domain to block.  Likewise, you could specify simply the word <samp>spam</samp> and EE would match any URL that contained that word, whether it was "www.spam-king.com" or "www.i-eat-spam.com".</li>

			<li><b>User-Agent:</b> A "user agent" is the actual program or script that accesses your website.  This could be a browser, search engine spider, RSS aggregator, or something else.  These all identify themselves in some way with a user agent name.  You may specify user agents to block/deny here, with each entry on a separate line.  For instance, the user agent "Popdexter" is included in the downloadable ExpressionEngine.com Blacklist.  As with the other settings, you may specify partial strings and EE will match any user agent that contains that string.</li>
		</ol>



	<h2><a name="whitelist">Whitelist</a></h2>

	<p>The Whitelist is effectively the opposite of the Blacklist.  It allows you to specify items that you <em>do</em> want to allow.  For instance, let's say that you specify the word <samp>spam</samp> in the "URL" section of the Blacklist.  However, you actually really love the food Spam and thus you want to make sure that your friend over at www.i-eat-spam.com can post comments and trackbacks to your site.  So, you can add <samp>i-eat-spam.com</samp> to your Whitelist to make sure that she isn't blocked.</p>

	<h3>Specifying Whitelisted Content</h3>

		<p>There are three types of content that you can add to the Whitelist.  These are identical to the ones in the Blacklist:</p>

		<ol>
			<li><b>IP Address:</b> You may place IP addresses on separate lines.  For example, you could place <samp>127.255.0.123</samp> in the list.  You may also place partial IP addresses, which means that ExpressionEngine will match all of the addresses contained within that submask.  For instance, if you specify <samp>127.255.0</samp> then EE will match "127.255.0.0" through "127.255.0.255".</li>

			<li><b>URL:</b> URLs or URL fragments can be placed here, with each entry on a separate line.  For instance, you could specify <samp>www.spam-king.com</samp> and EE would match any incoming URLs from that domain to allow.  Likewise, you could specify simply the word <samp>spam</samp> and EE would allow any URL that contained that word, whether it was "www.spam-king.com" or "www.i-eat-spam.com".</li>

			<li><b>User-Agent:</b> A "user agent" is the actual program or script that accesses your website.  This could be a browser, search engine spider, RSS aggregator, or something else.  These all identify themselves in some way with a user agent name.  You may specify user agents to allow here, with each entry on a separate line.  As with the other settings, you may specify partial strings and EE will match any user agent that contains that string.</li>
		</ol>



	<h2><a name="updating_blacklist">Updating your Blacklist</a></h2>

	<p>When you update the Blacklist with new items (i.e. when you hit the <dfn>Update</dfn> button or download the ExpressionEngine.com Blacklist), ExpressionEngine will determine what new items have been added and search through previously posted referrers and trackbacks looking for matches.  If any matches are found, EE will check to ensure that they do not match any items in your Whitelist before automatically deleting them.  This means that as you update your Blacklist you can automatically clean out existing trackbacks and referrers that match your new entries.</p>



	<p><b>Note:</b> ExpressionEngine does <strong>not</strong> search through comments and delete them when new items are added to the Blacklist.  Mass deleting of comments via a simple search of a term is not recommended, since it might have unforeseen results and the deleted comments are not retrievable.</p>



	<h2><a name="downloading_lists">Downloading ExpressionEngine.com Lists</a></h2>

	<p>EllisLab, Inc. maintains its own Blacklist and Whitelist, which are available for licensed purchasers of ExpressionEngine.   These lists are maintained with the help of our users.  If you have an item that you believe should be added to the Blacklist or Whitelist, please email <a href="mailto:blacklist@expressionengine.com">blacklist@expressionengine.com</a>.</p>

	<p>To download the ExpressionEngine Lists, you must have your License Number entered into the <dfn>Admin &gt; General Configuration</dfn> area of the Control Panel.  To download the Lists, go into the <dfn>Modules &gt; Blacklist</dfn>.  In the main menu for the module are links that you can click to automatically download and add the ExpressionEngine.com Lists to your own.</p>

	<p>ExpressionEngine will compare the downloaded list to your local list and add any new entries to the end of your lists.  EE will not delete or alter any of your existing items in your lists.</p>



	<p><b>Note:</b> Downloading the ExpressionEngine.com Blacklist and Whitelist requires that your host have outgoing socket connections enabled on your server and the 'fsockopen()' PHP function available.  This configuration is quite common on most web hosts and default server configurations.</p>



	<h2><a name="writing_htaccess">Writing Blacklist to .htaccess File</a></h2>

	<p>If you are on an Apache-based webserver, you can have ExpressionEngine copy your Blacklist URLs and IP addresses to a <var>.htaccess</var> file so that visitors matching those Blacklist terms are completely blocked from accessing your site.  In order to use this feature several things must be done.</p>

	<ol>
		<li>You must be on an Apache-based webserver.  Further, the server must be set up to allow you to use <var>.htaccess</var> files.  If you are unsure whether this applies to you, check with your Host.  This method <em>will not</em> work on non-Apache servers such as those using Windows' IIS server.</li>

		<li>You must have a <var>.htaccess</var> file at your site root.  If you do not have one already, create a blank text file and name it <var>.htaccess</var>.  If you already have a <var>.htaccess</var> file, don't worry since ExpressionEngine will not overwrite existing content or delete the file; it will only add new content.</li>

		<li>Once you have a <var>.htaccess</var> file at the site root on your server, you will need to <strong>change its permissions to 666</strong> so that it is "writable" and ExpressionEngine can add content to it.</li>

		<li><p>In your ExpressionEngine Control Panel, go to <dfn>Modules &gt; Blacklist/Whitelist</dfn>.  At the bottom of the table you'll see a "Write Blacklist to .htaccess file?" setting.  In this setting, you will need to place the <em>full server path</em> to the <var>.htaccess</var> file.  This is <strong>not</strong> the URL to the file.</p>

			<p>The full server path might look something like <kbd>/home/example.com/public_html/.htaccess</kbd>.  You <strong>must</strong> include the <var>.htaccess</var> filename, so be sure to include it.  If you do not know what to use for your full server path, contact your Host or server admin.</p></li>

		<li>Press the <dfn>Submit</dfn> button on the form and ExpressionEngine will add the contents of your Blacklist to the <var>.htaccess</var> file, blocking them from being able to access your site at all.</li>
	</ol>

	<div class="important">
		<p>Also note that an "override" is included for any referrers that include your own server name (i.e. <samp>example.com</samp>) to make sure that there is no chance that you block your own site by accident.  In order to include this "override" you need to ensure that your "Cookie Domain" preference is set under <dfn>Admin &gt; System Preferences &gt; Cookie Settings</dfn>.</p>
	</div>



</div>


<p class="center"><a href="#top">Top of Page</a></p>

<!-- {user_guide_comments} -->

<div id="footer">
  <address><a href="http://expressionengine.com/">ExpressionEngine</a> &#8211; Copyright &#169; 2002-2012 &#8211; <a href="http://ellislab.com/">EllisLab, Inc.</a></address>
</div>

</body>
</html>